@import "o-assets/main";
@import "o-useragent/main";
@import "o-grid/main";
@import "o-fonts/main";
@import "o-colors/main";
@import "o-hoverable/main";

@import '_variables';
@import '_mixins';


/* Load fonts */
@if (not $o-ft-header-is-silent) {
	@include oFontsInclude(BentonSans);
}


@if ($o-ft-header-sticky) {
	@if (length($o-ft-header-sticky) > 0) {
		
		@if (length($o-ft-header-sticky) < 4) {
			@include oFtHeaderPositionStatic();
		}

		@if (length($o-ft-header-sticky) == 4) {
			@include oFtHeaderPositionFixed();
		} @else {
			@each $layout in $o-ft-header-sticky {
				@include oGridRespondTo($layout) {
					@include oFtHeaderPositionFixed(); 
				}
			}				
		}	

	} @else {
		@include oFtHeaderPositionFixed();
	}
	
} @else {
	@include oFtHeaderPositionStatic();
}

.o-ft-header {
    margin-bottom: 10px;
}

.o-ft-header__topbar {
    height: 50px;
    background-color: oColorsGetColorFor(header-background);
}

.o-ft-header__topbar__content {
	@extend %o-grid-row;
	@extend %o-grid-col;
	@extend %o-grid-colspan-12;
	@extend %o-grid-no-right-gutter;
}

$_ft-header-logo-initials-height: 28px;
$_ft-header-logo-initials-width: 49px;
$_ft-header-logo-size: 60px;
$_ft-header-logo-padding-top: 8px;
$_ft-header-logo-condensed-size: 40px;
$_ft-header-logo-scaling-factor: $_ft-header-logo-condensed-size / $_ft-header-logo-size;

$_ft-header-logo-padding-bottom: $_ft-header-logo-size - ($_ft-header-logo-padding-top + $_ft-header-logo-initials-height);
$_ft-header-logo-font-size: $_ft-header-logo-initials-height * 1.42;

.o-ft-header__logo {
	display: block;
	padding-top: $_ft-header-logo-padding-top;
	padding-left: 0;
	padding-right: 0;
	margin-top: 0;
	padding-bottom: $_ft-header-logo-padding-bottom;
	width: $_ft-header-logo-size;
	height: $_ft-header-logo-initials-height;
	font-size: $_ft-header-logo-font-size;
	text-align: center;
	line-height: $_ft-header-logo-initials-height;
	color: oColorsGetColorFor(ft-initials, text);
	float: left;
	background: #ffe2c6; 
	@include oUseragentPrefixer(background, linear-gradient(to bottom,  #ffe2c6 0%,#f7d8b9 100%), true, false);
	@include oUseragentPrefixer(transition-property, padding-top padding-bottom width height margin-top);
	@include oUseragentPrefixer(transition-duration, 0.2s);

	> abbr {	
		@include oUseragentPrefixer(transition-property, width height);
		@include oUseragentPrefixer(transition-duration, 0.2s);
		display: block;
		height: $_ft-header-logo-initials-height;
		width: $_ft-header-logo-initials-width;
		background: url(oFtHeaderAsset('img/ft-logo.gif')) no-repeat; 
		// the weird value for rgba is to prevent sass converting rgba(0,0,0,0) to 'transparent', which would cause the following line of css to be understood by ie7/8 and the svg to be downloaded
		background: rgba(255, 255, 255, 0.001) url(oFtHeaderAsset('img/ft-logo.svg')) no-repeat;
		// background: rgba(0, 0, 0, 0.001) url(../img/ft-logo.svg) no-repeat;
		text-indent: 100%;
		white-space: nowrap;
		overflow: hidden;
		margin: 0 auto;
	}
}

.o-ft-header--condensed .o-ft-header__logo {
	margin-top: 5px;
	padding-top: $_ft-header-logo-scaling-factor * $_ft-header-logo-padding-top;
	padding-bottom: $_ft-header-logo-scaling-factor * $_ft-header-logo-padding-bottom;
	width: $_ft-header-logo-scaling-factor * $_ft-header-logo-size;
	height: $_ft-header-logo-scaling-factor * $_ft-header-logo-initials-height;
	font-size: $_ft-header-logo-scaling-factor * $_ft-header-logo-font-size;
	line-height: $_ft-header-logo-scaling-factor * $_ft-header-logo-initials-height;

	> abbr {	
		height: $_ft-header-logo-scaling-factor * $_ft-header-logo-initials-height;
		width: $_ft-header-logo-scaling-factor * $_ft-header-logo-initials-width;
	}	
}

@media print {
	.o-ft-header__logo abbr {
		text-indent: 0;
	}	
}

.o-ft-header__topbar__items {
	text-align: right;
	overflow: hidden;
	height: 50px;
	float: right;
}

$o-ft-header-topbar-item-selector: #{'%o-ft-header__topbar__item'};
$o-ft-header-topbar-item-active-selector: #{'%o-ft-header__topbar__item--active'};

@if (not $o-ft-header-is-silent) {
	$o-ft-header-topbar-item-selector: append($o-ft-header-topbar-item-selector, #{'.o-ft-header__topbar__item'}, comma) !global;
	$o-ft-header-topbar-item-active-selector: append($o-ft-header-topbar-item-active-selector, #{'.o-ft-header__topbar__item--active'}, comma) !global;
}

@mixin _oFtHeaderItemActiveStyles () {
	color: oColorsGetColorFor(header-item-active, text);
	background-color: oColorsGetColorFor(header-item-active, background);
}

#{$o-ft-header-topbar-item-selector} {
	float: left;
	min-width: 50px;
	height: 50px;
	font-family: $o-fonts-bentonsans-normal;
	text-align: center;
	color: oColorsGetColorFor(header-item, text);
	background-color: oColorsGetColorFor(header-item, background);
	border-right: 1px solid oColorsGetColorFor(header-item, border);
	font-size: 25px;
	line-height: 50px;
	cursor: pointer;
	text-decoration: none;

	#{$o-hoverable-if-hover-enabled} &:hover {
		@include _oFtHeaderItemActiveStyles();
		text-decoration: none;
	}		
	&:first-child {
		border-left: 1px solid oColorsGetColorFor(header-item, border);
	}
}

@include oGridRespondTo(S M) {
	#{$o-ft-header-topbar-item-selector}  {
		&:last-child {
			border-right: none;
		}
	}

	#{$o-ft-header-topbar-item-active-selector} {
		border-right: none;
	}
}


#{$o-ft-header-topbar-item-active-selector} {
	@include _oFtHeaderItemActiveStyles();
}